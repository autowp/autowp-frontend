<div class="comments">
  @if (data$ | async; as data) {
    @if (data.messages && (typeID$ | async) !== CommentsType.FORUMS_TYPE_ID) {
      <h2 i18n>Comments</h2>
    }
    @if (data.messages) {
      <app-comments-list
        [itemID]="itemID$ | async"
        [typeID]="typeID$ | async"
        (sent)="onSent($event)"
        [messages]="data.messages"
        [deep]="0"
      ></app-comments-list>
    }
    @if (data.paginator) {
      <app-paginator [data]="data.paginator"></app-paginator>
    }
  } @else {
    <div class="spinner-border" role="status"><span class="visually-hidden" i18n>Loadingâ€¦</span></div>
  }

  @if (user$ | async) {
    <app-comments-form
      [itemID]="itemID$ | async"
      [typeID]="typeID$ | async"
      (sent)="onSent($event)"
    ></app-comments-form>
  }
  @if ((user$ | async) === null) {
    <app-markdown
      class="alert alert-block alert-info"
      i18n-markdown
      markdown="To be able to post a comment, you must [create an account or sign in using social networks account](/login)"
    ></app-markdown>
  }
</div>
