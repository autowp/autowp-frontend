<!-- script>
    (function (i, s, o, g, r, a, m) {i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {(i[r].q = i[r].q || []).push(arguments)}, i[r].l = 1 * new Date(); a = s.createElement(o),m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-24654784-1', <?=\Zend\Json\Json:: encode($this -> hostManager() -> getCookieDomain($this -> language())) ?>);
    ga('send', 'pageview');
  </script -->

<app-moder-menu></app-moder-menu>

<div class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler"
      aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/" [title]="'page/1/title'|translate">
      <svg>
        <path d="M 25.084186,6.42508 A 23.373101,22.952514 0 0 0 2.3045258,24.36829 l 4.6649949,0.69665 a 18.670109,18.165696 0 0 1 2.2157068,-5.22461 l 8.1363055,5.87817 a 8.7994987,8.2394148 0 0 0 -0.720458,1.77407 c 3.39102,1.47331 6.006412,3.38159 8.53766,5.33717 2.128107,-1.62945 4.12335,-3.67705 8.512342,-5.40515 a 8.7994987,8.2394148 0 0 0 -0.720899,-1.75241 l 8.091717,-5.84614 a 18.670109,18.165696 0 0 1 2.236046,5.25665 l 4.636644,-0.63755 A 23.373101,22.952514 0 0 0 25.084186,6.42508 Z m 0.0279,4.67475 a 18.670109,18.165696 0 0 1 13.156976,5.31682 l -8.46016,6.07776 a 8.7994987,8.2394148 0 0 0 -4.668675,-1.27227 8.7994987,8.2394148 0 0 0 -4.717385,1.30345 l -8.475101,-6.0886 A 18.670109,18.165696 0 0 1 25.112086,11.09983 Z M 0.06,25.71092 0.1719214,32.42839 c 11.5620876,0.30579 19.0486266,4.79308 24.8875546,10.9705 l 0,-8.9e-4 8.91e-4,0.002 4.4e-4,-10e-4 0,6.7e-4 C 30.899734,37.22225 38.386273,32.73517 49.94836,32.42938 l 0.111922,-6.71769 -0.0359,0.063 c -15.908438,1.59268 -20.550853,5.31075 -24.963965,9.39343 l -4.5e-4,0 C 20.646834,31.08557 16.004418,27.36749 0.0959807,25.77482 l -0.0359,-0.063 z"
        />
      </svg>
    </a>

    <div class="collapse navbar-collapse" id="navbarToggler">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0" *ngIf="mainMenuItems">
        <li class="nav-item" *ngFor="let page of mainMenuItems" [class.dropdown]="page.id == 22" [ngClass]="{'d-md-none d-lg-block': [25, 117].indexOf(+page.id) != -1, 'd-md-none d-lg-none d-xl-block': page.id == 42}">
          <a class="nav-link" [href]="page.url" [textContent]="page.name | translate" *ngIf="page.id != 22 && !page.routerLink"></a>
          <a class="nav-link" [routerLink]="page.routerLink" [textContent]="page.name | translate" *ngIf="page.id != 22 && page.routerLink"></a>
          <a href="#" *ngIf="page.id == 22" class="nav-link dropdown-toggle" data-toggle="dropdown">
            {{page.name | translate}}
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu" *ngIf="page.id == 22">
            <a [href]="category.url" class="dropdown-item" *ngFor="let category of categories">
              {{category.name}}&#xa0;
              <span class="count">({{category.cars_count - category.new_cars_count}}
                <span *ngIf="category.new_cars_count > 0">+{{category.new_cars_count}}</span>)</span>
            </a>
          </ul>
        </li>
      </ul>
      <form action="//www.google.com/search" method="get" class="form-inline my-2 my-lg-0 mr-4" *ngIf="searchHostname" ngNoForm>
        <input type="hidden" name="ie" value="utf-8" />
        <input type="hidden" name="domains" [value]="searchHostname" />
        <input type="hidden" name="sitesearch" [value]="searchHostname" />
        <input type="text" class="form-control" [placeholder]="'layout/search'|translate" name="q" />
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="nav-item<?=$this->pageEnv()->isOnPath(49) ? ' active' : ''?>" *ngIf="user">
          <a class="nav-link" routerLink="/account/messages">
            <i class="fa fa-comment"></i>
            <span class="badge badge-pill badge-secondary" [textContent]="newPersonalMessages" *ngIf="newPersonalMessages"></span>
          </a>
        </li>
        <li class="nav-item<?=$this->pageEnv()->isOnPath(79) ? ' active' : ''?>" *ngIf="!user">
          <a routerLink="/login" class="nav-link">
            <i class="fa fa-sign-in"></i>
            {{'login/sign-in'|translate}}
          </a>
        </li>
        <li class="nav-item btn-group" ngbDropdown>
          <button type="button" class="btn btn-link nav-link" ngbDropdownToggle>
            {{'page/87/name'|translate}}
            <b class="caret"></b>
          </button>
          <div ngbDropdownMenu>
            <ng-container *ngFor="let page of mainInSecondaryItems">
              <ng-container *ngIf="(!page.registered_only || user) && (!page.guest_only || !user)">
                <a class="dropdown-item" *ngIf="!page.routerLink" [href]="page.url" [textContent]="page.name | translate" [ngClass]="{'d-block d-sm-block d-md-block d-lg-none': [25, 117].indexOf(+page.id) !== -1, 'd-block d-sm-block d-md-block d-lg-block d-xl-none': page.id == 42}"></a>
                <a class="dropdown-item" *ngIf="page.routerLink" [routerLink]="page.routerLink" [textContent]="page.name | translate" [ngClass]="{'d-block d-sm-block d-md-block d-lg-none': [25, 117].indexOf(+page.id) !== -1, 'd-block d-sm-block d-md-block d-lg-block d-xl-none': page.id == 42}"></a>
              </ng-container>
            </ng-container>
            <div class="dropdown-divider d-block d-sm-block d-md-block d-lg-block d-xl-none"></div>
            <ng-container *ngFor="let page of secondaryMenuItems">
              <ng-container *ngIf="(!page.registered_only || user) &amp;&amp; (!page.guest_only || !user)">
                <a href="#" *ngIf="page.id == 90" class="dropdown-item" (click)="signOut($event)">
                  <i [ngClass]="page.icon" *ngIf="page.icon"></i>
                  {{page.name | translate}}
                </a>
                <a *ngIf="!page.routerLink" [href]="page.url" class="dropdown-item {{page.class}}">
                  <i [ngClass]="page.icon" *ngIf="page.icon"></i>
                  {{page.name | translate}}
                </a>
                <a *ngIf="page.id != 90 && page.routerLink" [routerLink]="page.routerLink" class="dropdown-item {{page.class}}">
                  <i [ngClass]="page.icon" *ngIf="page.icon"></i>
                  {{page.name | translate}}
                </a>
              </ng-container>
            </ng-container>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" *ngFor="let language of languages">
            <!--  | filter: { active: true } -->
            <i class="{{language.flag}}"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" [href]="language.url + path.substring(1)" [class.active]="language.active" *ngFor="let language of languages">
              <i class="{{language.flag}}"></i>
              {{language.name}}
            </a>
            <a class="dropdown-item" href="https://github.com/autowp/autowp/tree/master/module/Application/language" translate>layout/language-contributing</a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div [ngClass]="'col-sm-' + ((layoutParams$|async).sidebar ? 8 : 12)">
      <app-breadcrumbs></app-breadcrumbs>
      <div class="page-header" *ngIf="(layoutParams$|async).name && !(layoutParams$|async).disablePageName">
        <h1 [textContent]="(layoutParams$|async).name"></h1>
      </div>

      <router-outlet></router-outlet>
    </div>
    <div class="col-sm-4" *ngIf="(layoutParams$|async).sidebar">
      <div class="card card-body" *ngIf="user">
        <div>
          <app-user [user]="user"></app-user>
          <br />
          <a routerLink="/account/profile" translate>page/48/name</a>
          <br />
          <i class="fa fa-sign-out"></i>
          <a href="#" (click)="signOut()" translate>login/sign-out</a>
        </div>
        <p>
          <i class="fa fa-comment"></i>
          <a routerLink="/account/messages" class="badge badge-danger" *ngIf="newPersonalMessages" translate [translateParams]="{ messages: newPersonalMessages }">ng-layout/you-have-new-messages</a>
          <a routerLink="/account/messages" translate *ngIf="!newPersonalMessages">layout/personal-messages</a>
        </p>
      </div>

      <h3 *ngIf="!user" translate>login/sign-in</h3>
      <div class="card card-body" *ngIf="!user">
        <form (submit)="doLogin()">
          <p>
            <input type="text" name="login" placeholder="{{'login/login-or-email'|translate}}" class="form-control" [(ngModel)]="loginForm.login"
            />
          </p>
          <p *ngFor="let message of loginInvalidParams | invalidParams : 'login'" [textContent]="message" class="invalid-feedback"></p>
          <p>
            <input type="password" name="password" placeholder="{{'user/password'|translate}}" class="form-control" [(ngModel)]="loginForm.password"
            />
          </p>
          <p *ngFor="let message of loginInvalidParams | invalidParams : 'password'" [textContent]="message" class="invalid-feedback"></p>
          <div class="checkbox">
            <label>
              <input type="checkbox" value="1" name="remember" [(ngModel)]="loginForm.remember" /> {{'login/remember'|translate}}
            </label>
          </div>
          <div>
            <div class="float-right text-right">
              <a href="/ng/signup" translate>login/registration</a>
              <br />
              <a href="/ng/restore-password" translate>login/forgot-password?</a>
            </div>
            <input type="submit" value="{{'login/sign-in'|translate}}" class="btn btn-primary" />
          </div>
        </form>
      </div>

      <a class="twitter-timeline" href="https://twitter.com/autowp_ru" data-widget-id="323907714319253505" data-chrome="nofooter"
        width="370" height="730">@autowp_ru Twitter</a>
      <!--script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script-->
    </div>
  </div>

  <div class="bottom-line" *ngIf="!(layoutParams$|async).isAdminPage">
    <p>
      <strong>
        {{'layout/brand'|translate}} '2005&ndash;{{'present-time-abbr'|translate}}
      </strong>
    </p>
  </div>

  <footer class="footer" *ngIf="!(layoutParams$|async).isAdminPage">
    <div class="row">
      <div class="col-md-6">
        <p class="links">
          <a href="https://twitter.com/autowp_ru" placement="top" ngbTooltip="Twitter">
            <i class="fa fa-twitter"></i>
          </a>
          <a href="https://www.facebook.com/WheelsAge" placement="top" ngbTooltip="Facebook">
            <i class="fa fa-facebook"></i>
          </a>
          <a href="https://vk.com/wheelsage" placement="top" ngbTooltip="VK">
            <i class="fa fa-vk" aria-hidden="true"></i>
          </a>
          <a href="https://github.com/autowp/autowp" placement="top" ngbTooltip="GitHub">
            <i class="fa fa-github"></i>
          </a>
          <a href="https://play.google.com/store/apps/details?id=com.autowp.wallpaper" placement="top" ngbTooltip="Android wallpaper">
            <i class="fa fa-android"></i>
          </a>
          <a href="/ng/telegram" placement="top" ngbTooltip="Telegram">
            <i class="fa fa-telegram"></i>
          </a>
          <a href="/ng/feedback" placement="top" [ngbTooltip]="'feedback/title'|translate">
            <i class="fa fa-comment"></i>
          </a>
        </p>
        <p>
          <a routerLink="/about" translate>page/136/name</a>
          •
          <a routerLink="/donate" translate>page/196/name</a>
        </p>
      </div>
      <div class="col-md-6">
        <app-markdown class="card card-body copyrights" [markdown]="'layout/footer'|translate"></app-markdown>
      </div>
    </div>
    <p class="language-picker">
      <a [href]="language.url + path.substring(1)" *ngFor="let language of languages">
        <!--  | filter: { active: false } -->
        <i class="{{language.flag}}"></i>
        {{language.name}}
      </a>
      <a href="https://github.com/autowp/autowp/tree/master/module/Application/language" translate>layout/language-contributing</a>
    </p>
  </footer>
</div>
