<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-24654784-1', 'auto');
  ga('send', 'pageview');

</script>

<app-moder-menu *ngIf="!(layoutParams$|async).isGalleryPage"></app-moder-menu>

<div class="navbar navbar-expand-md navbar-dark bg-dark" *ngIf="!(layoutParams$|async).isGalleryPage">
  <div class="container">
    <button class="navbar-toggler navbar-toggler-right" type="button" (click)="isNavbarCollapsed = !isNavbarCollapsed" aria-expanded="false"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" routerLink="/" [title]="'page/1/title'|translate">
      <svg>
        <path d="M 25.084186,6.42508 A 23.373101,22.952514 0 0 0 2.3045258,24.36829 l 4.6649949,0.69665 a 18.670109,18.165696 0 0 1 2.2157068,-5.22461 l 8.1363055,5.87817 a 8.7994987,8.2394148 0 0 0 -0.720458,1.77407 c 3.39102,1.47331 6.006412,3.38159 8.53766,5.33717 2.128107,-1.62945 4.12335,-3.67705 8.512342,-5.40515 a 8.7994987,8.2394148 0 0 0 -0.720899,-1.75241 l 8.091717,-5.84614 a 18.670109,18.165696 0 0 1 2.236046,5.25665 l 4.636644,-0.63755 A 23.373101,22.952514 0 0 0 25.084186,6.42508 Z m 0.0279,4.67475 a 18.670109,18.165696 0 0 1 13.156976,5.31682 l -8.46016,6.07776 a 8.7994987,8.2394148 0 0 0 -4.668675,-1.27227 8.7994987,8.2394148 0 0 0 -4.717385,1.30345 l -8.475101,-6.0886 A 18.670109,18.165696 0 0 1 25.112086,11.09983 Z M 0.06,25.71092 0.1719214,32.42839 c 11.5620876,0.30579 19.0486266,4.79308 24.8875546,10.9705 l 0,-8.9e-4 8.91e-4,0.002 4.4e-4,-10e-4 0,6.7e-4 C 30.899734,37.22225 38.386273,32.73517 49.94836,32.42938 l 0.111922,-6.71769 -0.0359,0.063 c -15.908438,1.59268 -20.550853,5.31075 -24.963965,9.39343 l -4.5e-4,0 C 20.646834,31.08557 16.004418,27.36749 0.0959807,25.77482 l -0.0359,-0.063 z"
        />
      </svg>
    </a>

    <div class="collapse navbar-collapse" [ngbCollapse]="isNavbarCollapsed">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item d-md-none d-lg-block" [class.active]="isActive(25)|async">
          <a class="nav-link" routerLink="/twins" translate>page/25/name</a>
        </li>
        <li class="nav-item" [class.active]="isActive(21)|async">
          <a class="nav-link" routerLink="/mosts" translate>page/21/name</a>
        </li>
        <li class="nav-item" ngbDropdown [class.active]="isActive(22)|async">
          <button type="button" class="btn btn-link nav-link" ngbDropdownToggle>
            {{'page/22/name' | translate}}
            <b class="caret" aria-hidden="true"></b>
          </button>
          <div ngbDropdownMenu>
            <a [routerLink]="['/category', category.catname]" class="dropdown-item" *ngFor="let category of categories">
              {{category.name_text}}&#xa0;
              <span class="count">
                ({{category.descendants_count}})
                <!--<span *ngIf="category.new_cars_count > 0">+{{category.new_cars_count}}</span> -->
              </span>
            </a>
          </div>
        </li>
        <li class="nav-item d-md-none d-lg-block" [class.active]="isActive(117)|async">
          <a class="nav-link" routerLink="/map" translate>page/117/name</a>
        </li>
        <li class="nav-item d-sm-none d-lg-none d-xl-block" [class.active]="isActive(42)|async">
          <a class="nav-link" routerLink="/forums" translate>page/42/name</a>
        </li>
      </ul>
      <form action="//www.google.com/search" method="get" class="form-inline my-2 my-lg-0 mr-4" *ngIf="searchHostname" ngNoForm>
        <input type="hidden" name="ie" value="utf-8" />
        <input type="hidden" name="domains" [value]="searchHostname" />
        <input type="hidden" name="sitesearch" [value]="searchHostname" />
        <input type="text" class="form-control" placeholder="Search" i18n-placeholder="@@layout/search" name="q" />
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="nav-item" *ngIf="user" [class.active]="isActive(49)|async">
          <a class="nav-link" routerLink="/account/messages" ngPreserveWhitespaces>
            <i class="fa fa-comment" aria-hidden="true"></i>
            <span class="badge badge-pill badge-secondary" [textContent]="newPersonalMessages" *ngIf="newPersonalMessages"></span>
          </a>
        </li>
        <li class="nav-item" *ngIf="!user" [class.active]="isActive(79)|async">
          <a routerLink="/login" class="nav-link">
            <i class="fa fa-sign-in" aria-hidden="true"></i>
            <ng-container i18n="@@login/sign-in">Sign in</ng-container>
          </a>
        </li>
        <li class="nav-item btn-group" ngbDropdown [class.active]="isActive(87)|async">
          <button type="button" class="btn btn-link nav-link" ngbDropdownToggle>
            {{'page/87/name'|translate}}
            <b class="caret" aria-hidden="true"></b>
          </button>
          <div ngbDropdownMenu>

            <a class="dropdown-item d-lg-none" [class.active]="isActive(25)|async" routerLink="/twins" translate>page/25/name</a>
            <a class="dropdown-item d-lg-none" [class.active]="isActive(117)|async" routerLink="/map" translate>page/117/name</a>
            <a class="dropdown-item d-xl-none" [class.active]="isActive(42)|async" routerLink="/forums" translate>page/42/name</a>

            <div class="dropdown-divider d-block d-sm-block d-md-block d-lg-block d-xl-none"></div>

            <a routerLink="/signup" class="dropdown-item" *ngIf="!user" [class.active]="isActive(52)|async">
              <i class="fa fa-fw fa fa-pencil" aria-hidden="true"></i>
              {{'page/91/name' | translate}}
            </a>
            <a routerLink="/upload" class="dropdown-item" [class.active]="isActive(29)|async">
              <i class="fa fa-fw fa-upload" aria-hidden="true"></i>
              {{'page/29/name' | translate}}
            </a>
            <a routerLink="/feedback" class="dropdown-item" [class.active]="isActive(89)|async">
              <i class="fa fa-fw fa-comment" aria-hidden="true"></i>
              {{'page/89/name' | translate}}
            </a>
            <a href="#" (click)="showOnlineUsers()" class="dropdown-item">
              <i class="fa fa-fw fa fa-users" aria-hidden="true"></i>
              {{'page/124/name' | translate}}
            </a>
            <a routerLink="/account/contacts" class="dropdown-item" *ngIf="user" [class.active]="isActive(211)|async">
              <i class="fa fa-fw fa-address-book" aria-hidden="true"></i>
              {{'page/211/name' | translate}}
            </a>
            <a routerLink="/account" class="dropdown-item" *ngIf="user" [class.active]="isActive(48)|async">
              <i class="fa fa-fw fa-user" aria-hidden="true"></i>
              {{'page/48/name' | translate}}
            </a>
            <a routerLink="/about" class="dropdown-item" [class.active]="isActive(136)|async">
              <i class="fa fa-fw fa-info" aria-hidden="true"></i>
              {{'page/136/name' | translate}}
            </a>
            <a href="#" (click)="signOut()" class="dropdown-item" *ngIf="user">
              <i class="fa fa-fw fa-sign-out" aria-hidden="true"></i>
              {{'page/90/name' | translate}}
            </a>
          </div>
        </li>
        <li class="nav-item " ngbDropdown placement="bottom-right">
          <a href="#" class="nav-link" ngbDropdownToggle (click)="false">
            <ng-container *ngFor="let lang of languages">
              <i [ngClass]="lang.flag" aria-hidden="true" *ngIf="lang.code == language"></i>
            </ng-container>
          </a>
          <div ngbDropdownMenu>
            <a class="dropdown-item" [href]="'//' + lang.hostname + urlPath" [class.active]="lang.code == language" *ngFor="let lang of languages">
              <i [ngClass]="lang.flag" aria-hidden="true"></i>
              {{lang.name}}
            </a>
            <a class="dropdown-item" href="https://github.com/autowp/autowp/tree/master/module/Application/language" i18n="@@layout/language-contributing">Want to contribute?</a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<div [class.container]="!(layoutParams$|async).isGalleryPage" [class.container-fluid]="(layoutParams$|async).isGalleryPage">
  <div class="row">
    <div [ngClass]="'col-sm-' + ((layoutParams$|async).sidebar ? 8 : 12)">
      <router-outlet></router-outlet>
    </div>
    <div class="col-sm-4" *ngIf="(layoutParams$|async).sidebar">
      <div class="card card-body" *ngIf="user">
        <div ngPreserveWhitespaces>
          <app-user [user]="user"></app-user>
          <br />
          <a routerLink="/account/profile" translate>page/48/name</a>
          <br />
          <i class="fa fa-sign-out" aria-hidden="true"></i>
          <a href="#" (click)="signOut()" i18n="@@login/sign-out">Sign out</a>
        </div>
        <p ngPreserveWhitespaces>
          <i class="fa fa-comment" aria-hidden="true"></i>
          <a routerLink="/account/messages" class="badge badge-danger" *ngIf="newPersonalMessages" translate [translateParams]="{ messages: newPersonalMessages }">ng-layout/you-have-new-messages</a>
          <a routerLink="/account/messages" translate *ngIf="!newPersonalMessages" i18n="@@layout/personal-messages">Personal messages</a>
        </p>
      </div>

      <h3 *ngIf="!user" i18n="@@login/sign-in">Sign in</h3>
      <div class="card card-body mb-4" *ngIf="!user">
        <form (submit)="doLogin()">
          <p>
            <input type="text" name="login" placeholder="login or e-mail" i18n-placeholder="@@login/login-or-email" class="form-control" [(ngModel)]="loginForm.login" />
          </p>
          <p *ngFor="let message of loginInvalidParams | invalidParams : 'login'" [textContent]="message" class="invalid-feedback"></p>
          <p>
            <input type="password" name="password" placeholder="Password" i18n-placeholder="@@user/password" class="form-control" [(ngModel)]="loginForm.password" />
          </p>
          <p *ngFor="let message of loginInvalidParams | invalidParams : 'password'" [textContent]="message" class="invalid-feedback"></p>
          <div>
            <div class="float-right text-right">
              <a routerLink="/signup" i18n="@@login/registration">Sign up</a>
              <br />
              <a routerLink="/restore-password" i18n="@@login/forgot-password?">Forgot your password?</a>
            </div>
            <button type="submit" class="btn btn-primary" i18n="@@login/sign-in">Sign in</button>
          </div>
        </form>
      </div>

      <a class="twitter-timeline" href="https://twitter.com/autowp_ru" data-widget-id="323907714319253505" data-chrome="nofooter"
        width="370" height="730">@autowp_ru Twitter</a>
      <!--script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script-->
    </div>
  </div>

  <div class="bottom-line" *ngIf="!(layoutParams$|async).isAdminPage && !(layoutParams$|async).isGalleryPage">
    <p>
      <strong>
        <ng-container i18n="@@layout/brand">WheelsAge.org</ng-container> '2005&ndash;{{'present-time-abbr'|translate}}
      </strong>
    </p>
  </div>

  <footer class="footer" *ngIf="!(layoutParams$|async).isAdminPage && !(layoutParams$|async).isGalleryPage">
    <div class="row">
      <div class="col-md-6">
        <p class="links">
          <a href="https://twitter.com/autowp_ru" placement="top" ngbTooltip="Twitter">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
          <a href="https://www.facebook.com/WheelsAge" placement="top" ngbTooltip="Facebook">
            <i class="fa fa-facebook" aria-hidden="true"></i>
          </a>
          <a href="https://vk.com/wheelsage" placement="top" ngbTooltip="VK">
            <i class="fa fa-vk" aria-hidden="true"></i>
          </a>
          <a href="https://github.com/autowp/autowp" placement="top" ngbTooltip="GitHub">
            <i class="fa fa-github" aria-hidden="true"></i>
          </a>
          <a href="https://play.google.com/store/apps/details?id=com.autowp.wallpaper" placement="top" ngbTooltip="Android wallpaper">
            <i class="fa fa-android" aria-hidden="true"></i>
          </a>
          <a routerLink="/telegram" placement="top" ngbTooltip="Telegram">
            <i class="fa fa-telegram" aria-hidden="true"></i>
          </a>
          <a routerLink="/feedback" placement="top" [ngbTooltip]="'feedback/title'|translate">
            <i class="fa fa-comment" aria-hidden="true"></i>
          </a>
        </p>
        <p>
          <a routerLink="/about" translate>page/136/name</a>
          •
          <a routerLink="/donate" translate>page/196/name</a>
        </p>
      </div>
      <div class="col-md-6">
        <app-markdown class="card card-body copyrights" [markdown]="'layout/footer'|translate"></app-markdown>
      </div>
    </div>
    <p class="language-picker">
      <ng-container *ngFor="let lang of languages">
        <a [href]="'//' + lang.hostname + urlPath" *ngIf="lang.code !== language">
          <i [ngClass]="lang.flag" aria-hidden="true"></i>
          {{lang.name}}
        </a>
      </ng-container>
      <a href="https://github.com/autowp/autowp/tree/master/module/Application/language" i18n="@@layout/language-contributing">Want to contribute?</a>
      <a routerLink="/policy" i18n>Privacy Policy</a>
    </p>
  </footer>
</div>

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>
