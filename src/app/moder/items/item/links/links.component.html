<div class="card card-body" *ngIf="canEditMeta$|async as canEditMeta">
  <ngb-progressbar type="primary" [striped]="true" [animated]="true" [value]="100" [hidden]="loading <= 0"></ngb-progressbar>
  <form *ngIf="canEditMeta" method="post" (submit)="saveLinks()">
    <table class="table table-condensed table-striped">
      <thead>
        <tr>
          <th i18n scope="col">Text</th>
          <th i18n scope="col">Address</th>
          <th i18n scope="col">Type</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let link of links; let i = index">
          <td>
            <input type="text" name="name{{i}}" [(ngModel)]="link.name" class="form-control" />
          </td>
          <td>
            <input type="text" name="url{{i}}" [(ngModel)]="link.url" class="form-control" />
          </td>
          <td>
            <select name="type{{i}}" [(ngModel)]="link.type_id" class="form-control">
              <option value="default" i18n>interest link</option>
              <option value="official" i18n>official</option>
              <option value="club" i18n>club</option>
            </select>
          </td>
        </tr>
        <tr>
          <td>
            <input type="text" name="name" [(ngModel)]="newLink.name" class="form-control" />
          </td>
          <td>
            <input type="text" name="url" [(ngModel)]="newLink.url" class="form-control" />
          </td>
          <td>
            <select name="type" [(ngModel)]="newLink.type_id" class="form-control">
              <option value="default" i18n>interest link</option>
              <option value="official" i18n>official</option>
              <option value="club" i18n>club</option>
            </select>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <button class="btn btn-primary" type="submit" i18n>Submit</button>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
  <table class="table table-condensed table-stripped" *ngIf="!canEditMeta">
    <tbody>
      <tr>
        <th i18n scope="col">Text</th>
        <th i18n scope="col">Address</th>
        <th i18n scope="col">Type</th>
      </tr>
      <tr *ngFor="let link of links">
        <td [textContent]="link.name"></td>
        <td [textContent]="link.url"></td>
        <td [textContent]="link.type_id"></td>
      </tr>
    </tbody>
  </table>
</div>
